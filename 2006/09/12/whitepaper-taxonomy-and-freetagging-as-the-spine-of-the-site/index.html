<!DOCTYPE html>



<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8" />

  <!-- Set the viewport width to device width for mobile -->
  <meta name="viewport" content="width=device-width" />
  <link rel="openid.server" href="http://www.myopenid.com/server" />
  <link rel="openid.delegate" href="http://berkes.myopenid.com/" />
  <link rel="openid2.local_id" href="http://berkes.myopenid.com" />
  <link rel="openid2.provider" href="http://www.myopenid.com/server" />
  <meta http-equiv="X-XRDS-Location" content="http://www.myopenid.com/xrds?username=berkes.myopenid.com" />

   <title>whitepaper Taxonomy and freetagging as the spine of the site</title>
   <meta name="author" content="Bèr ‘berkes’ Kessels" />
   <link href="http://feeds.feedburner.com/berkes" rel="alternate" title="whitepaper Taxonomy and freetagging as the spine of the site Feed" type="application/atom+xml" />
   <link rel="author" href="/humans.txt" type="text/plain" />
   <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
   <!-- Included CSS Files -->
   <link rel='stylesheet' type='text/css' href='/bundles/66bfe58a92310a729441d3ebeed7faf2.css' />


   <!--[if lt IE 9]>
   <link rel='stylesheet' type='text/css' href='/bundles/5bf927c3c4faac96d17903f7ba5b378a.css' />

   <![endif]-->

   <script type='text/javascript' src='/bundles/2f42e0e43641f260414dd4eb0161fb9d.js'></script>


   <!-- IE Fix for HTML5 Tags -->
   <!--[if lt IE 9]>
   <script type='text/javascript' src='/bundles/69431f1ec831bacf31013dff2872cba0.js'></script>

   <![endif]-->
</head>
<body>
	<!-- container -->
	<div class="container">
    <header>
      <div class="row">
        <a href="/" title="Home">
          <img src="/assets//images/logo.png" alt="Logo" title="Bèr ‘berkes’ Kessels" />
        </a>
      </div>

      <nav id="main" class="row">
        <div class="onion">
        <ul>
          <li>
          <a href="/about.html">EN / About</a>
          </li>
          <li>
          <a href="/archive.html">EN / Articles</a>
          </li>
          <li>
          <a href="/over.html">NL / Over</a>
          </li>
          <li>
          <a href="/archief.html">NL / Artikelen</a>
          </li>
        </ul>
        </div>
      </nav>
    </header>
    <section id="main-content" class="row">
      <article>
  <header>
    <h1>whitepaper Taxonomy and freetagging as the spine of the site</h1>
  </header> 
  <div class="body">
    <h2>Taxonomy and freetagging as the spine of the site</h2>

<p>I just finished the first phase of <a href="http://kaisu.org">Kaisu.org</a>. A site alike Nowpublic, in the sense that it allows <strong>you</strong> to make the news. The main difference is the angle to look at the news. KaiSu looks at the news from a 'regional' angle; allowing to look for local news near you.</p>

<p><img src="http://webschuur.com/sites/webschuur.com/files/kaisu_front_thumb.png" alt="KaiSu frontpage" /></p>

<p>Main features the client asked for were:</p>

<ul>
<li>a clear mechanism to "write to places". You write news, or upload photo's ad add them to a region.</li>
<li>a way to allow adoption of a region.</li>
<li>multiple vectors to search on. We chose Regions (places) and Tags (categories).</li>
<li>a unique theme</li>
</ul>


<p>For now, the most interesting part is, how we achieved the part that allows the taxonomy browsing. This whitepaper dives a bit deeper in the technology behind it.</p>

<h3>Subdomains</h3>

<p>Each and every tag under "places" has a subdomain, and can therefore be "adopted". In near future we have a front-end to choose an alternative theme for an adopted subdomain.
To achieve subdomain rewriting I created a small module that (ab) uses the init hook to perform a rewrite of the url based on the aliases. With pathauto we now have a sort of mechanism to create subdomains on the fly.</p>

<pre><code>function kaisu_redirect_init() {
  if(($subdomain = kaisu_redirect_get_current_sub()) &amp;&amp; ($_GET['q'] == '' || $_GET['q'] == variable_get('site_frontpage', 'node'))) {
    $src = db_result(db_query("SELECT src FROM {url_alias} WHERE (src LIKE 'taxonomy/term/%' AND dst like 'places/%s')", $subdomain));
    $_GET['q'] = $src;
  }
}
</code></pre>

<p>To rewrite in-site urls Drupal has nothing. You either need to preg-replace strings on the moment they are printed (in theme_page()) or nothing. This is a missing feature, for which several patches were written, but all were dropped for sake of "performance".</p>

<p>Luckily the taxonomy url alone received something that can be abused to achieve what we wanted. It works only for taxonomy urls! If you change the "module" that "owns" a vocabulary (poke around in the vocabulary table), you can make your module that overrides the url.</p>

<pre><code>function kaisu_redirect_term_path($term) {
  $name = pathauto_cleanstring($term-&gt;name);
  return "http://$name.kaisu.org";
}
</code></pre>

<h3>Filtering taxonomy.</h3>

<p>By using <a href="http://drupal.org/project/refine_by_taxo">refine_by_taxo</a>, I can present blocks in the sidebars that only contain tags that were used in the posts of a certain subdomain. Its behaviour is somehow similar to the "related tags" in <a href="http://www.simpy.com/user/berkes/tag/drupal">simpy</a>.</p>

<h3>Better taxonomy display</h3>

<p>A lot of Drupal developers and users might have noticed the fact that each term can have a 'description'. Currently the only module using this, is forum.module (that I am aware of). I wrote a small module that creates a block containing the description of the "current active term list". By placing that block in a <a href="http://drupal.org/node/29140">region</a> at the top, I can show really nice descriptions on the top. See for example <a href="http://paddington.kaisu.org/">the place Paddington</a>.</p>

<h3>categories, next step.</h3>

<p>The plan is to move all these concepts over to a complete "<a href="http://category.greenash.net.au/">category</a>" implementation. That way we can still use tags/terms for what they are (a single flag on a node), but use "places" in a much more general way, by adding metadata (images, geodata, users, permissions) to such a tag: it becomes an entity on its own.</p>

<pre><code>$node-&gt;tag = 'politics' is what tagging should be (IMO) about, in Drupal.
$node-&gt;category = $category_node, is what categories is about, $category_node is a complete entity, on the same level as the $node.
</code></pre>

<p>As you see, categories are a much better candidate for what we aimed at with places. But category module is still new, so I did not yet dare to go down that new road yet, so this is a thing for a next phase. By now I am confident that moving there is a good choice.</p>

<h3>Conclusion</h3>

<p>Taxonomy can be used for a lot more then tagging some nodes. It can be a perfect navigation system, in a community site. It is simple enough to allow simple modules to enhance it. Its limitations, however are that a term is neither "an entity", nor a "simple tag", but something in-between: it can have a description, but that is not filtered. It has a title, but cannot have an image. So it is too limited for use as standalone entities, for that we need nodes-as-terms: categories. But it is a little too complex for simply flagging nodes.</p>

  </div>
  <footer>
    <p class="note">
    
      <em>This article was published on webschuur.com. And migrated to this blog. </em>
    
    </p>
    <time datetime="2006-09-12T00:00:00+02:00"
    pubdate="pubdate">
      Posted on 12 September 2006
    </time>
    in
    
    
      
      


  
    
      <a href="/tags.html#organisation management-ref" class="black radius label">organisation management<span class="size">6</span></a>
    
      <a href="/tags.html#collaborative writing-ref" class="black radius label">collaborative writing<span class="size">8</span></a>
    
      <a href="/tags.html#social software-ref" class="black radius label">social software<span class="size">9</span></a>
    
      <a href="/tags.html#weblogging-ref" class="black radius label">weblogging<span class="size">5</span></a>
    
      <a href="/tags.html#drupal-ref" class="black radius label">drupal<span class="size">214</span></a>
    
  



    
  </footer>
</article>

<div id="author">
  <p>
  
  
    <strong>About  the author:</strong> Bèr Kessels is an experienced webdeveloper  with a great passion for
    technology and Open Source. A golden combination to implement that technology in a good and efficient
    way. Follow <a href="https://twitter.com/berkes">@berkes</a> on Twitter. Or read more <a href="/over.html">about Bèr</a>.
  
  </p>
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'berkes'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>


    </section>

    <footer class="main row">
      <div class="contact four columns">
        <p>
            Bèr ‘berkes’ Kessels<br />
            Bèr Kessels is an Open Source Webdeveloper.<br />
            <a href='mailto:ber@berk.es'>ber@berk.es</a>
          </p>
          <p>
            <a href="http://github.com/berkes/">github.com/berkes</a><br />
            <a href="http://twitter.com/berkes/">twitter.com/berkes</a><br />
          </p>
      </div>
      <div class="four columns">
        Copyright 2001-2013
        with a
        <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license">Creative Commons Atrribute-Share-alike 3.0 Unported license</a>
      </div>
      <div class="four columns">
        <a class="extra" href="/archive.html">Archive (All English articles)</a> <br />
        <a class="extra" href="/archief.html">Archief (Alle Nederlandse artikelen)</a> <br />
        <a class="extra" href="/tags.html">Tags</a> <br />
        <a href="http://feeds.feedburner.com/berkes"> RSS </a> <br />
      </div>
    </footer>
  </div>
  <!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://piwik.webschuur.com/" : "http://piwik.webschuur.com/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 9);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://piwik.webschuur.com/piwik.php?idsite=9" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->

</body>
</html>
