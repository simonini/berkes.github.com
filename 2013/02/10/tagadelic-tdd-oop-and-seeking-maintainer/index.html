<!DOCTYPE html>



<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8" />

  <!-- Set the viewport width to device width for mobile -->
  <meta name="viewport" content="width=device-width" />
  <link rel="openid.server" href="http://www.myopenid.com/server" />
  <link rel="openid.delegate" href="http://berkes.myopenid.com/" />
  <link rel="openid2.local_id" href="http://berkes.myopenid.com" />
  <link rel="openid2.provider" href="http://www.myopenid.com/server" />
  <meta http-equiv="X-XRDS-Location" content="http://www.myopenid.com/xrds?username=berkes.myopenid.com" />

   <title>Tagadelic: TDD, OOP and seeking maintainer</title>
   <meta name="author" content="Bèr ‘berkes’ Kessels" />
   <link href="http://feeds.feedburner.com/berkes" rel="alternate" title="Tagadelic: TDD, OOP and seeking maintainer Feed" type="application/atom+xml" />
   <link rel="author" href="/humans.txt" type="text/plain" />
   <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
   <!-- Included CSS Files -->
   <link rel='stylesheet' type='text/css' href='/bundles/66bfe58a92310a729441d3ebeed7faf2.css' />


   <!--[if lt IE 9]>
   <link rel='stylesheet' type='text/css' href='/bundles/5bf927c3c4faac96d17903f7ba5b378a.css' />

   <![endif]-->

   <script type='text/javascript' src='/bundles/2f42e0e43641f260414dd4eb0161fb9d.js'></script>


   <!-- IE Fix for HTML5 Tags -->
   <!--[if lt IE 9]>
   <script type='text/javascript' src='/bundles/69431f1ec831bacf31013dff2872cba0.js'></script>

   <![endif]-->
</head>
<body>
	<!-- container -->
	<div class="container">
    <header>
      <div class="row">
        <a href="/" title="Home">
          <img src="/assets//images/logo.png" alt="Logo" title="Bèr ‘berkes’ Kessels" />
        </a>
      </div>

      <nav id="main" class="row">
        <div class="onion">
        <ul>
          <li>
          <a href="/about.html">EN / About</a>
          </li>
          <li>
          <a href="/archive.html">EN / Articles</a>
          </li>
          <li>
          <a href="/over.html">NL / Over</a>
          </li>
          <li>
          <a href="/archief.html">NL / Artikelen</a>
          </li>
        </ul>
        </div>
      </nav>
    </header>
    <section id="main-content" class="row">
      <article>
  <header>
    <h1>Tagadelic: TDD, OOP and seeking maintainer</h1>
  </header> 
  <div class="body content">
    <p><strong>TL;DR</strong>: <a href="http://drupal.org/project/tagadelic">Tagadelic</a> is close to a Drupal 7 release, with an easy upgrade
path to Drupal 8. It is completely rewritten, Object Oriented and Test
Driven. Since I don't do any Drupal anymore, I am looking for someone who can maintain
a clean, OOP and TDD-module, to take it over from me.</p>

<p>There is just so much you can do when porting an age-old module again
and again. Tagadelic has been around since mid-2005, has been ported
over and over again. Mind you: not upgraded but ported. Quick, dirty and
"works-for-me" ports. Like most other modules, actually. There never was
a stable release for Drupal7, because the module never was really stable
in the first place. Yes, it might work (for you), but that is far from
<em>stable</em> and releasable.</p>

<p>Between 2005 and now, I learned programming properly. I mean, OOP,
unit-testing, patterns and all that (This also lead to me, <a href="http://berk.es/2012/10/01/farewell-drupal/">abandoning all
my Drupal work, mostly</a>).</p>

<p>None of my publicly released Drupal-modules ever
resembled that progress I made; mainly because Drupal itself is not OOP. Has poor
testing abilities (please read on, I will explain later) and applies
quite a few anti-patterns. This makes writing really clean and pretty code,
somewhat discouraging. Most of its examples, best practices and defaults
go straight against what is in general considered best practice.</p>

<p>But since Tagadelic is used by a lot of people, I wanted to create a
<em>proper</em> replacement. A module with pretty code, easy to implement APIs
and some additional, turnkey modules for those who cannot or will not write these
few lines of PHP. A module that resembles what I now consider good code
and properly developed. As a replacement for what I thought proper 8
years ago.</p>

<p>I coded for several months and today released the first alpha.</p>

<p>In the long run, I can conclude three things:</p>

<p>Drupal is not really ready for OOP development. The interfacing between my module and Drupal
required me to write wrappers (so that Tagadelic classes access
Drupal-functions in an OOP-manner) and to write the modules themselves
with global functions, since that is how Drupal expects the hooks and
implementations.</p>

<p>DrupalWebTest is way, way too slow and feature-poor for Test Driven
Development (TDD). Tagadelic only has about 150 DrupalWebTests, but running
them all takes over 5 minutes (on my machine: quad-core Intel 2.67GHz, SSD drives
only). Note that in a typical Rails (being -rightfully- known for being very
slow) with cucumber suite of over 600 tests takes under 30 seconds;
that includes selenium opening Firefox and clicking around in a few
tests. 30 seconds is considered unacceptably slow there.</p>

<p>When developing test-driven (or Behaviour Driven) you typically
run the isolated tests five, six times. And the entire suite of tests at
least once. So aside from the actual coding, the testing alone takes 30
minutes. This is both discouraging (meh, I'll just assume everything is
still green, will test in next iteration) and very hard for your "flow"
and concentration.
It is feature-poor in a sense that I ended up writing most assertions
and several set-up functions myself. assertXpath()? Nope. assertHasId()?
Nope. assertIdenticalArrays()? Nope. And worse is that it breaks a very
important rule for testing: isolation. If you want to test whether some
admin-setting can be saved and creates the proper variable, you are also
testing whether a Drupal is installed properly, user can log in, is admin,
can access a page, has nodes, has access to creating these nodes and so
on. I ended up poking into the database (not even "my" tables) because
somewhere in the clutter of setup-tasks stuff was created but it failed.</p>

<p>It is really fun to write unit-tests with <a href="https://github.com/sebastianbergmann/phpunit/">phpUnit</a>. I was very much
positively impressed by that test-environment and by using it. The
biggest adventure was how to stub out Drupal. Drupal, using global
functions for stuff like <code>check_plain()</code> is nearly impossible to mock
and stub. I solved this by extending my <a href="https://github.com/berkes/tagadelic/blob/7.x-2.x/tests/TagadelicCloudTest.php#L106">DrupalWrapper</a> and
stubbing that. After all: I don't care whether <code>check_plain()</code> itself
works and clears out XSS, I only care whether or not my classes call
that function in proper places to ensure clean output. Testing whether
<code>check_plain()</code> works is not my concern, here. I chose phpUnit over
DrupalUnit, because the latter is pretty much <a href="http://stackoverflow.com/questions/6045241/unit-testing-drupal-with-drupalunittestcase-fails-on-database-setup/6046100#6046100">unusable for
unit-testing of arbitrary classes</a>.</p>

<p>And now it is time for someone, or several someones to slowly take over the module. Together
we will release a Drupal7 2.0 version and then I can carry over all
project rights on my last Drupalproject.</p>

<p>Interested? You should be:</p>

<ul>
<li>Familiar with PHP OOP development. You should probably feel that the
usual way of Developing Drupal modules in a none-OOP manner is not
a very good way.</li>
<li>Familiar with PHPunit and Drupal Tests. You should feel strongly for
TDD and good test-coverage. You should probably feel that even though
writing Drupal Web Tests is not (yet) perfect and requires time and
effort, it always should happen.</li>
<li>Able to maintain such a module for a substantial time. It being TDD
and all, means that it won't take you a lot of effort or time. But it
would be a shame if three months after a release you abandon it
altogether because you like Node.js better. Or so.</li>
<li>Wanting to develop on Github. At least until the 2.0 release.</li>
</ul>


    <figure>
  <img src="/images//2013/02/10/tagadelic-tdd-oop-and-seeking-maintainer.png" alt="Woodcut from Doré. Purely illustrative" />
  
    <figcaption>Doré Woodcut. Its only function is to make the layout look better. And these images are really nice themselves</figcaption>
  
</figure>

  </div>
  <footer>
    <time datetime="2013-02-10T00:00:00+01:00"
    pubdate="pubdate">
      Posted on 10 February 2013
    </time>
    in
    
    
      
      


  
    
      <a href="/tags.html#tagadelic-ref" class="black radius label">tagadelic<span class="size">1</span></a>
    
      <a href="/tags.html#Drupal-ref" class="black radius label">Drupal<span class="size">1</span></a>
    
      <a href="/tags.html#TDD-ref" class="black radius label">TDD<span class="size">2</span></a>
    
      <a href="/tags.html#OOP-ref" class="black radius label">OOP<span class="size">1</span></a>
    
  



    
  </footer>
</article>

<div id="author">
  <p>
  
  
    <strong>About  the author:</strong> Bèr Kessels is an experienced webdeveloper  with a great passion for
    technology and Open Source. A golden combination to implement that technology in a good and efficient
    way. Follow <a href="https://twitter.com/berkes">@berkes</a> on Twitter. Or read more <a href="/over.html">about Bèr</a>.
  
  </p>
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'berkes'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>


    </section>

    <footer class="main row">
      <div class="contact four columns">
        <p>
            Bèr ‘berkes’ Kessels<br />
            Bèr Kessels is an Open Source Webdeveloper.<br />
            <a href='mailto:ber@berk.es'>ber@berk.es</a>
          </p>
          <p>
            <a href="http://github.com/berkes/">github.com/berkes</a><br />
            <a href="http://twitter.com/berkes/">twitter.com/berkes</a><br />
          </p>
      </div>
      <div class="four columns">
        Copyright 2001-2013
        with a
        <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license">Creative Commons Attribute-Share-alike 3.0 Unported license</a>
      </div>
      <div class="four columns">
        <a class="extra" href="/archive.html">Archive (All English articles)</a> <br />
        <a class="extra" href="/archief.html">Archief (Alle Nederlandse artikelen)</a> <br />
        <a class="extra" href="/tags.html">Tags</a> <br />
        <a href="http://feeds.feedburner.com/berkes"> RSS </a> <br />
      </div>
    </footer>
  </div>
  <!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://piwik.webschuur.com/" : "http://piwik.webschuur.com/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 9);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://piwik.webschuur.com/piwik.php?idsite=9" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->

</body>
</html>
